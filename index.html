<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drag and Drop UI</title>
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        height: 100vh;
        margin: 0;
    }

    #sidebar {
        width: 20%;
        background-color: #f0f0f0;
        padding: 20px;
        overflow-y: auto;
    }

    #main-content {
        flex: 1;
        padding: 0px;
        position: relative;
    }

    .draggable {
        display: inline-block;
        padding: 10px;
        padding-top: 5px;
        padding-bottom: 5px;
        margin: 5px;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        border-radius: 10%;
    }

    .droppable {
        border: 2px dashed #ccc;
        min-height: 100px;
        width: 100%;
        margin-bottom: 20px;
        padding: 20px;
        box-sizing: border-box;
        position: relative;
    }

    .dropped {
        display: inline-block;
        padding: 10px;
        padding-top: 5px;
        padding-bottom: 5px;
        margin: 5px;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        border-radius: 10%;
    }

    .listel {
        display: inline-block;
        padding: 10px;
        padding-top: 5px;
        padding-bottom: 5px;
        margin: 5px;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        border-radius: 10%;
    }

    .clearfix::after {
        content: "";
        clear: both;
        display: table;
    }
</style>
</head>
<body>
    <div id="sidebar">
        <h2>Lista element√≥w</h2>
        <!-- Add more draggable elements here -->
    </div>
    <div id="main-content" class="droppable">
        <!-- Droppable area -->
    </div>

    <script>
        window.onload = (event) => {
            console.log("abc")
            localStorage.clear()
            if(localStorage.length == 0) {
                localStorage.setItem("0", JSON.stringify({"name": "Woda","emoji": "üíß"}))
                localStorage.setItem("1", JSON.stringify({"name": "Ogie≈Ñ","emoji": "üî•"}))
                localStorage.setItem("2", JSON.stringify({"name": "Wiatr","emoji": "üí®"}))
                localStorage.setItem("3", JSON.stringify({"name": "Ziemia","emoji": "üåç"}))
            }
            for (let i = 0; i < localStorage.length; i++) {
                item = JSON.parse(localStorage.getItem(i))
                console.log(item)
                const node = document.createElement("div")
                node.classList.add("listel")
                node.innerText = item.emoji + " " + item.name
                document.getElementById("sidebar").appendChild(node)
            }
        }

        interact('#sidebar').dropzone({
        // only accept elements matching this CSS selector
        accept: '.draggable',
        overlap: 0.6,

        ondrop: function (event) {
            event.relatedTarget.remove()
        }
        })

        interact('.draggable').dropzone({
            accept: '.draggable',
            overlap: 0.5,
            
            ondrop: function(event) {
                const first = event.currentTarget.textContent
                const second = event.relatedTarget.textContent
                console.log()
            }
        })

        interact('.draggable').draggable({
            inertia: false,
            // keep the element within the area of it's parent
            modifiers: [
            // interact.modifiers.restrictRect({
            //     restriction: 'parent',
            //     endOnly: false
            // })
            ],
            autoScroll: false,
            listeners: {
            // call this function on every dragmove event
            move: dragMoveListener,
            }
        })

        function dragMoveListener (event) {
            var target = event.target
            // keep the dragged position in the data-x/data-y attributes
            var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx
            var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy

            // translate the element
            target.style.transform = 'translate(' + x + 'px, ' + y + 'px)'

            // update the posiion attributes
            target.setAttribute('data-x', x)
            target.setAttribute('data-y', y)
        }

        // this function is used later in the resizing and gesture demos
        window.dragMoveListener = dragMoveListener

        

        interact('.listel').on('doubletap', function(event) {
            const clone = event.currentTarget.cloneNode(true);
            const mainContent = document.getElementById('main-content');
            clone.classList.remove('listel');
            clone.classList.add('draggable');
            clone.style.position = 'absolute';
            clone.style.left = `${event.clientX}px`;
            clone.style.top = `${event.clientY}px`;
            mainContent.appendChild(clone);
        });
    </script>
</body>
</html>
